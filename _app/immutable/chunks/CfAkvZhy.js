import{m as L,z as re,F as ne,C as F,q as T,G as fe,y as ue,g as W,I as se,A as oe,H as te,B as Z,D as b,v as R,J as ie,K as ve,L as $,i as de,M as A,o as q,x as pe,N as j,O as ce,P as B,Q as ge,R as _e,S as he,T as Ee,j as ae,p as le,U as y,V as me,W as V,X as Te,Y as Ae,k as Ce,Z as we}from"./BOPq1Y_T.js";function De(r,n){return n}function Ie(r,n,a){for(var t=[],p=n.length,f,s=n.length,c=0;c<p;c++){let h=n[c];le(h,()=>{if(f){if(f.pending.delete(h),f.done.add(h),f.pending.size===0){var o=r.outrogroups;Y(B(f.done)),o.delete(f),o.size===0&&(r.outrogroups=null)}}else s-=1},!1)}if(s===0){var l=t.length===0&&a!==null;if(l){var v=a,i=v.parentNode;Ae(i),i.append(v),r.items.clear()}Y(n,!l)}else f={pending:new Set(n),done:new Set},(r.outrogroups??(r.outrogroups=new Set)).add(f)}function Y(r,n=!0){for(var a=0;a<r.length;a++)Ce(r[a],n)}var ee;function He(r,n,a,t,p,f=null){var s=r,c=new Map,l=(n&ne)!==0;if(l){var v=r;s=T?F(fe(v)):v.appendChild(L())}T&&ue();var i=null,h=se(()=>{var u=a();return ge(u)?u:u==null?[]:B(u)}),o,d=!0;function w(){e.fallback=i,Se(e,o,s,n,t),i!==null&&(o.length===0?i.f&A?(i.f^=A,O(i,null,s)):ae(i):le(i,()=>{i=null}))}var N=re(()=>{o=W(h);var u=o.length;let x=!1;if(T){var D=oe(s)===te;D!==(u===0)&&(s=Z(),F(s),b(!1),x=!0)}for(var E=new Set,I=de,H=pe(),g=0;g<u;g+=1){T&&R.nodeType===ie&&R.data===ve&&(s=R,x=!0,b(!1));var S=o[g],M=t(S,g),_=d?null:c.get(M);_?(_.v&&$(_.v,S),_.i&&$(_.i,g),H&&I.skipped_effects.delete(_.e)):(_=Ne(c,d?s:ee??(ee=L()),S,M,g,p,n,a),d||(_.e.f|=A),c.set(M,_)),E.add(M)}if(u===0&&f&&!i&&(d?i=q(()=>f(s)):(i=q(()=>f(ee??(ee=L()))),i.f|=A)),T&&u>0&&F(Z()),!d)if(H){for(const[k,z]of c)E.has(k)||I.skipped_effects.add(z.e);I.oncommit(w),I.ondiscard(()=>{})}else w();x&&b(!0),W(h)}),e={effect:N,items:c,outrogroups:null,fallback:i};d=!1,T&&(s=R)}function Se(r,n,a,t,p){var _,k,z,U,X,G,J,K,P;var f=(t&Te)!==0,s=n.length,c=r.items,l=r.effect.first,v,i=null,h,o=[],d=[],w,N,e,u;if(f)for(u=0;u<s;u+=1)w=n[u],N=p(w,u),e=c.get(N).e,e.f&A||((k=(_=e.nodes)==null?void 0:_.a)==null||k.measure(),(h??(h=new Set)).add(e));for(u=0;u<s;u+=1){if(w=n[u],N=p(w,u),e=c.get(N).e,r.outrogroups!==null)for(const m of r.outrogroups)m.pending.delete(e),m.done.delete(e);if(e.f&A)if(e.f^=A,e===l)O(e,null,a);else{var x=i?i.next:l;e===r.effect.last&&(r.effect.last=e.prev),e.prev&&(e.prev.next=e.next),e.next&&(e.next.prev=e.prev),C(r,i,e),C(r,e,x),O(e,x,a),i=e,o=[],d=[],l=i.next;continue}if(e.f&y&&(ae(e),f&&((U=(z=e.nodes)==null?void 0:z.a)==null||U.unfix(),(h??(h=new Set)).delete(e))),e!==l){if(v!==void 0&&v.has(e)){if(o.length<d.length){var D=d[0],E;i=D.prev;var I=o[0],H=o[o.length-1];for(E=0;E<o.length;E+=1)O(o[E],D,a);for(E=0;E<d.length;E+=1)v.delete(d[E]);C(r,I.prev,H.next),C(r,i,I),C(r,H,D),l=D,i=H,u-=1,o=[],d=[]}else v.delete(e),O(e,l,a),C(r,e.prev,e.next),C(r,e,i===null?r.effect.first:i.next),C(r,i,e),i=e;continue}for(o=[],d=[];l!==null&&l!==e;)(v??(v=new Set)).add(l),d.push(l),l=l.next;if(l===null)continue}e.f&A||o.push(e),i=e,l=e.next}if(r.outrogroups!==null){for(const m of r.outrogroups)m.pending.size===0&&(Y(B(m.done)),(X=r.outrogroups)==null||X.delete(m));r.outrogroups.size===0&&(r.outrogroups=null)}if(l!==null||v!==void 0){var g=[];if(v!==void 0)for(e of v)e.f&y||g.push(e);for(;l!==null;)!(l.f&y)&&l!==r.fallback&&g.push(l),l=l.next;var S=g.length;if(S>0){var M=t&ne&&s===0?a:null;if(f){for(u=0;u<S;u+=1)(J=(G=g[u].nodes)==null?void 0:G.a)==null||J.measure();for(u=0;u<S;u+=1)(P=(K=g[u].nodes)==null?void 0:K.a)==null||P.fix()}Ie(r,g,M)}}f&&me(()=>{var m,Q;if(h!==void 0)for(e of h)(Q=(m=e.nodes)==null?void 0:m.a)==null||Q.apply()})}function Ne(r,n,a,t,p,f,s,c){var l=s&_e?s&he?j(a):ce(a,!1,!1):null,v=s&Ee?j(p):null;return{v:l,i:v,e:q(()=>(f(n,l??a,v??p,c),()=>{r.delete(t)}))}}function O(r,n,a){if(r.nodes)for(var t=r.nodes.start,p=r.nodes.end,f=n&&!(n.f&A)?n.nodes.start:a;t!==null;){var s=V(t);if(f.before(t),t===p)return;t=s}}function C(r,n,a){n===null?r.effect.first=a:n.next=a,a===null?r.effect.last=n:a.prev=n}function Me(r,n){let a=null,t=T;var p;if(T){a=R;for(var f=fe(document.head);f!==null&&(f.nodeType!==ie||f.data!==r);)f=V(f);if(f===null)b(!1);else{var s=V(f);f.remove(),F(s)}}T||(p=document.head.appendChild(L()));try{re(()=>n(p),we)}finally{t&&(b(!0),F(a))}}export{He as e,Me as h,De as i};
